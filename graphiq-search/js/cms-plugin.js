!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={exports:{},id:i,loaded:!1};return t[i].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){n(2),n(16),n(17)},function(t,e,n){window.GraphiqSearch=n(3)},function(t,e,n){function i(t,e){t=t.charAt(0).toUpperCase()+t.slice(1);var n="set"+t;this[n]&&this[n](e)}function s(t,e){if(this.iframe){var n={method:t,payload:e};f.postMessage(n,this.host,this.iframe.contentWindow)}}function r(t){var e=t.data;e&&e.method&&("load"===e.method&&(this.isLoaded=!0,o.call(this),this.onLoad&&this.onLoad(),this.emit("load",e.payload)),"select"===e.method&&(this.emit("select",e.payload),this.hide()))}function o(){s.call(this,"options",{key:this.key,color:this.color,embedType:this.embedType})}var a=n(4),h=n(5),c=n(6).EventEmitter,u=n(7),l=n(8),f=n(15),d=function(){},p=a({init:function(t){t=u({},t),this.setMode(h.MODE_MODAL),this.setText().setTitle().setTags();for(var e in t)t.hasOwnProperty(e)&&i.call(this,e,t[e]);this.host=t.host||h.HOST,f.receiveMessage(r.bind(this),this.host)},show:function(){return this.showModal(),this.search(),this},showModal:function(){var t=this,e=this.host+"/widgets/plugin",n=this.buildQueryString({key:this.key,locale:this.locale,client_user_id:this.userID,client_user_email:this.userEmail,client:this.client,client_version:this.clientVersion});return n&&(e+="?"+n),this.modal?this.modal.show():(this.modal=l('<iframe id="wsp-iframe" src="'+e+'" frameborder="0"></iframe>',this.getMode()),this.iframe=document.querySelector("#wsp-iframe"),this.modal.on("hide",function(){t.afterHide()}),this.modal.on("show",function(){t.afterShow()})),this.afterShow(),this},afterShow:function(){return this.isShown=!0,this.emit("show"),this},hide:function(){return this.modal.hide(),this.afterHide(),this},afterHide:function(){return this.emit("hide"),this.isShown=!1,this},search:function(t){return this.isShown||this.showModal(),this.isLoaded?(t?s.call(this,"search",{text:t}):s.call(this,"search",{title:this.title(),text:this.text(),tags:this.tags()}),this):(this.onLoad=function(){this.search(t)}.bind(this),this)},setKey:function(t){return this.key=t,this},getKey:function(){return this.key},setText:function(t){return this.text=t||d,this},getText:function(){return this.text},setTitle:function(t){return this.title=t||d,this},getTitle:function(){return this.title},setTags:function(t){return this.tags=t||d,this},getTags:function(){return this.tags},setMode:function(t,e){return t===h.MODE_CONTAINER?(e&&this.setContainer(e),this.mode=h.MODE_CONTAINER):t===h.MODE_SIDEBAR?this.mode=h.MODE_SIDEBAR:this.mode=h.MODE_MODAL,this.modal&&this.modal.setMode(this.mode),this},getMode:function(){return this.mode||h.MODE_MODAL},setContainer:function(t){return this.container=t,this},getContainer:function(){return this.container},setUserID:function(t){return this.userID=t,this},getUserID:function(){return this.userID},setUserEmail:function(t){return this.userEmail=t,this},getUserEmail:function(){return this.userEmail},setColor:function(t){return t&&/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(t)&&(this.color=t),this},getColor:function(){return this.color},setEmbedType:function(t){return"script"!==t&&"iframe"!==t&&"wordpress"!==t&&"url"!==t||(this.embedType=t),this},getEmbedType:function(){return this.embedType||"script"},setLocale:function(t){return this.locale=t,this},getLocale:function(){return this.locale},setClient:function(t){return this.client=t,this},getClient:function(){return this.client},setClientVersion:function(t){return this.clientVersion=t,this},getClientVersion:function(){return this.clientVersion},attachEditor:function(t){return t.__graphiq_search=this,this.setText(function(){return t.getData()}),this.on("select",function(e){t.insertHtml("<br/>"+e.code+"<br/>")}),this},buildQueryString:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}});u(p.prototype,c.prototype),p.VERSION=h.VERSION,p.ICON=h.ICON,t.exports=p},function(t,e){t.exports=function(){function t(){function t(e){return this instanceof t?void(n||"function"!=typeof this.init||this.init.apply(this,e&&e.callee?e:arguments)):new t(arguments)}return t}function e(){}var n=!1,i=/\b_parent\b/;return e.extend=function(e){var s=this.prototype;n=!0;var r=new this;n=!1;for(var o in e){var a=e[o];"function"==typeof a&&i.test(a)?r[o]=function(t,e){var n="function"==typeof s[t]?s[t]:function(){throw new Error("Bad _parent() call: "+t+"() doesn't exist in parent class.")};return function(){var t=this._parent;this._parent=n;var i=e.apply(this,arguments);return this._parent=t,i}}(o,a):r[o]=a}var h=t();return h.prototype=r,h.prototype.constructor=h,h.extend=arguments.callee,h},function(t){return e.extend(t)}}()},function(t,e){t.exports={HOST:"https://www.graphiq.com",ICON:"https://img1.graphiq.com/sites/default/files/4261/media/images/_6326290.png",VERSION:"1.0.1",MODE_MODAL:"modal",MODE_SIDEBAR:"sidebar",MODE_CONTAINER:"container"}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function s(t){return"number"==typeof t}function r(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,s,a,h,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(r(n))for(a=Array.prototype.slice.call(arguments,1),c=n.slice(),s=c.length,h=0;s>h;h++)c[h].apply(this,a);return!0},n.prototype.addListener=function(t,e){var s;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),s||(s=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var s=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,s,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,s=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){s=a;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){var n,i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,r=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===s.call(t)},o=function(t){"use strict";if(!t||"[object Object]"!==s.call(t))return!1;var e=i.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&i.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!r)return!1;var o;for(o in t);return o===n||i.call(t,o)};t.exports=function a(){"use strict";var t,e,i,s,h,c,u=arguments[0],l=1,f=arguments.length,d=!1;for("boolean"==typeof u?(d=u,u=arguments[1]||{},l=2):("object"!=typeof u&&"function"!=typeof u||null==u)&&(u={});f>l;++l)if(t=arguments[l],null!=t)for(e in t)i=u[e],s=t[e],u!==s&&(d&&s&&(o(s)||(h=r(s)))?(h?(h=!1,c=i&&r(i)?i:[]):c=i&&o(i)?i:{},u[e]=a(d,c,s)):s!==n&&(u[e]=s));return u}},function(t,e,n){var i=n(9),s=n(10),r=(n(5),n(6).EventEmitter),o=n(7);t.exports=function(t,e){var a={};n(11);var h=document.createElement("div");h.innerHTML=s.replace("{content}",t),document.getElementsByTagName("body")[0].appendChild(h.children[0]);var c=document.getElementsByClassName("wsm-wrap")[0];return c.querySelector(".wsm-close").addEventListener("click",function(){a.hide()}),c.querySelector(".wsm-bg").addEventListener("click",function(){a.hide()}),a.show=function(){c.style.display="block",c.clientLeft,i.addClass(c,"shown"),a.emit("show")},a.hide=function(){i.removeClass(c,"shown"),setTimeout(function(){c.style.display="none"},400),a.emit("hide")},a.destroy=function(){c.parentNode.removeChild(c),a.emit("destroy")},a.setMode=function(t){c.dataset.mode=t},o(a,r.prototype),a.setMode(e),a.show(),a}},function(t,e){t.exports={addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}}},function(t,e){t.exports='<div class="wsm-wrap">\n	<div class="wsm-bg"></div>\n	<div class="wsm-frame">\n		<div class="wsm-content">{content}</div>\n		<div class="wsm-close">&times;</div>\n	</div>\n</div>\n'},function(t,e,n){var i=n(12);"string"==typeof i&&(i=[[t.id,i,""]]);n(14)(i,{})},function(t,e,n){e=t.exports=n(13)(),e.push([t.id,'/**\n * Common/Reset styles for all modes\n */\n.wsm-bg {\n	display: none;\n}\n.wsm-frame {\n	background: #eee;\n}\n.wsm-content {\n	position: absolute;\n	top: 0;\n	left: 0;\n	right: 0;\n	bottom: 0;\n}\n.wsm-content iframe {\n	position: absolute;\n	width: 100%;\n	height: 100%;\n}\n.wsm-wrap.shown {\n	opacity: 1 !important;\n}\n.wsm-close {\n	position: absolute;\n	top: 9px;\n	right: 20px;\n	padding: 3px;\n	text-align: center;\n	font-weight: bold;\n	color: #999;\n	font-size: 30px;\n	line-height: 1;\n	cursor: pointer;\n}\n.wsm-close:hover {\n	color: #aaa;\n}\n.wsm-close:active {\n	color: #bbb;\n}\n\n\n/**\n * Modal Mode\n */\n.wsm-wrap[data-mode="modal"] {\n	position: fixed;\n	min-height: 360px;\n	z-index: 9999999;\n	display: none;\n	opacity: 0;\n	transition: 0.4s opacity;\n	top: 0;\n	left: 0;\n	right: 0;\n	bottom: 0;\n}\n\n.wsm-wrap[data-mode="modal"] .wsm-bg {\n	display: block;\n	position: absolute;\n	background: #000;\n	opacity: 0.7;\n	top: 0;\n	left: 0;\n	right: 0;\n	bottom: 0;\n}\n\n.wsm-wrap[data-mode="modal"] .wsm-frame {\n	position: absolute;\n	top: 30px;\n	left: 30px;\n	right: 30px;\n	bottom: 30px;\n	z-index: 2;\n	-webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);\n	        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);\n}\n\n/**\n * Sidebar Mode\n */\n.wsm-wrap[data-mode="sidebar"] {\n	position: fixed;\n	min-height: 360px;\n	z-index: 9999999;\n	display: none;\n	opacity: 0;\n	transition: 0.4s opacity;\n	top: 0;\n	right: 0;\n	bottom: 0;\n	width: 300px;\n	-webkit-box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\n			box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2);\n}\n\n.wsm-wrap[data-mode="sidebar"] .wsm-frame {\n	position: absolute;\n	top: 0;\n	left: 0;\n	right: 0;\n	bottom: 0;\n}\n',""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=u[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(o(i.parts[r],e))}else{for(var a=[],r=0;r<i.parts.length;r++)a.push(o(i.parts[r],e));u[i.id]={id:i.id,refs:1,parts:a}}}}function s(t){for(var e=[],n={},i=0;i<t.length;i++){var s=t[i],r=s[0],o=s[1],a=s[2],h=s[3],c={css:o,media:a,sourceMap:h};n[r]?n[r].parts.push(c):e.push(n[r]={id:r,parts:[c]})}return e}function r(){var t=document.createElement("style"),e=d();return t.type="text/css",e.appendChild(t),t}function o(t,e){var n,i,s;if(e.singleton){var o=m++;n=p||(p=r()),i=h.bind(null,n,o,!1),s=h.bind(null,n,o,!0)}else n=r(),i=c.bind(null,n),s=function(){n.parentNode.removeChild(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}function a(t,e,n){var i=["/** >>"+e+" **/","/** "+e+"<< **/"],s=t.lastIndexOf(i[0]),r=n?i[0]+n+i[1]:"";if(t.lastIndexOf(i[0])>=0){var o=t.lastIndexOf(i[1])+i[1].length;return t.slice(0,s)+r+t.slice(o)}return t+r}function h(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=a(t.styleSheet.cssText,e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function c(t,e){var n=e.css,i=e.media,s=e.sourceMap;if(s&&"function"==typeof btoa)try{n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(JSON.stringify(s))+" */",n='@import url("data:text/css;base64,'+btoa(n)+'")'}catch(r){}if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u={},l=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},f=l(function(){return/msie 9\b/.test(window.navigator.userAgent.toLowerCase())}),d=l(function(){return document.head||document.getElementsByTagName("head")[0]}),p=null,m=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=f());var n=s(t);return i(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o],h=u[a.id];h.refs--,r.push(h)}if(t){var c=s(t);i(c,e)}for(var o=0;o<r.length;o++){var h=r[o];if(0===h.refs){for(var l=0;l<h.parts.length;l++)h.parts[l]();delete u[h.id]}}}}},function(t,e){!function(e){var n,i,s,r,o=1,e=this,a=!1,h="postMessage",c="addEventListener",u=e[h];fn={},fn.postMessage=function(t,e,n){e&&(n=n||parent,u?n[h](t,e.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):e&&(n.location=e.replace(/#.*$/,"")+"#"+ +new Date+o++ +"&"+t))},fn.receiveMessage=function(t,o,h){u?(t&&(r&&fn.receiveMessage(),r=function(e){return"string"==typeof o&&e.origin!==o||"function"==typeof o&&o(e.origin)===a?a:void t(e)}),e[c]?e[t?c:"removeEventListener"]("message",r,a):e[t?"attachEvent":"detachEvent"]("onmessage",r)):(n&&clearInterval(n),n=null,t&&(h="number"==typeof o?o:"number"==typeof h?h:100,s=document.location.hash,n=setInterval(function(){var e=document.location.hash,n=/^#?\d+&/;e!==i&&e!==s&&n.test(e)&&(i=e,s?document.location.hash=s:document.location.hash="",t({data:e.replace(n,"")}))},h)))},t.exports={postMessage:fn.postMessage,receiveMessage:fn.receiveMessage}}(window)},function(t,e,n){var i=n(3),s=window.jQuery;s&&!s.fn.graphiqSearch&&(s.fn.graphiqSearch=function(t){var e=this.data("__graphiq_search");return e?e.search():(t=s.extend(t,{mode:"container",container:this}),e=new i(t),this.data("__graphiq_search",e)),this})},function(t,e,n){var i="graphiq-search-plugin",s=n(5);window.CKEDITOR&&window.CKEDITOR.plugins.add(i,{init:function(t){t.addCommand(i,{exec:function(t){t.__graphiq_search?t.__graphiq_search.show():console.log("No Graphiq Search attached to this editor")}}),t.ui.addButton(i,{label:"Graphiq Search",icon:s.ICON,command:i})}})}]);