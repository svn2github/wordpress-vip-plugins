function update_simple_ordering_callback(response){if(response=='children'){window.location.reload();return;}var changes=jQuery.parseJSON(response);if(changes['id']!=null){jQuery.post(ajaxurl,{action:'simple_page_ordering',id:changes['id'],previd:changes['previd'],nextid:changes['nextid'],start:changes['start']},update_simple_ordering_callback);}else{jQuery.each(changes,function(key,value){if(jQuery('#inline_'+key).length>0){if(value['menu_order']!=null){console.log(value);jQuery('#inline_'+key+' .menu_order').html(value['menu_order']);jQuery('#inline_'+key+' .post_parent').html(value['post_parent']);var post_title=jQuery('#inline_'+key+' .post_title').html();var dashes=0;while(dashes<value['depth']){post_title='&mdash; '+post_title;dashes++;}jQuery('tr#post-'+key+' a.row-title').html(post_title);}else{jQuery('#inline_'+key+' .menu_order').html(value);}}});jQuery('.check-column .waiting').siblings('input').show().siblings('img').remove();jQuery('tr.iedit').css('cursor','move');jQuery(".wp-list-table tbody").sortable('enable');}}jQuery('tr.iedit').css('cursor','move');jQuery(".wp-list-table tbody").sortable({items:'tr:not(.inline-edit-row)',cursor:'move',axis:'y',containment:'table.widefat',scrollSensitivity:40,helper:function(e,ui){ui.children().each(function(){jQuery(this).width(jQuery(this).width());});return ui;},start:function(event,ui){if(!ui.item.hasClass('alternate'))ui.item.css('background-color','#ffffff');ui.item.children('td,th').css('border-bottom-width','0');ui.item.css('outline','1px solid #dfdfdf');},stop:function(event,ui){ui.item.removeAttr('style');ui.item.children('td,th').css('border-bottom-width','1px');},update:function(event,ui){jQuery('tr.iedit').css('cursor','default');jQuery(".wp-list-table tbody").sortable('disable');var postid=ui.item.attr('id').substr(5);var prevpostid=false;var prevpost=ui.item.prev();if(prevpost.length>0)prevpostid=prevpost.attr('id').substr(5);var nextpostid=false;var nextpost=ui.item.next();if(nextpost.length>0)nextpostid=nextpost.attr('id').substr(5);ui.item.find('.check-column input').hide().after('<img alt="processing" src="images/wpspin_light.gif" class="waiting" style="margin-left: 6px;" />');jQuery.post(ajaxurl,{action:'simple_page_ordering',id:postid,previd:prevpostid,nextid:nextpostid},update_simple_ordering_callback);jQuery('tr.iedit').each(function(i){if(i%2==0)jQuery(this).addClass('alternate');else jQuery(this).removeClass('alternate');});}});